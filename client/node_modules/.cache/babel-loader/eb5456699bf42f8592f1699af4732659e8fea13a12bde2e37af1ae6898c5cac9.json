{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\POOJA\\\\newtask\\\\client\\\\src\\\\Components\\\\Addtask\\\\Addtask.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport { useAuth } from \"../Store/authh\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst CreateTask = () => {\n  _s();\n  const [questionText, setQuestionText] = useState(\"\");\n  const [userID, setUserID] = useState(\"\");\n  const [tasks, setTasks] = useState([]);\n  const {\n    UserIDFROMLSGet\n  } = useAuth();\n  useEffect(() => {\n    // Fetch userID from local storage when the component mounts\n    const storedUserID = UserIDFROMLSGet();\n    if (storedUserID) {\n      setUserID(storedUserID);\n    } else {\n      console.error(\"No userID found in local storage.\");\n      toast.error(\"Failed to retrieve user ID. Please log in again.\");\n    }\n  }, [UserIDFROMLSGet]);\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (!userID) {\n      toast.error(\"User ID is missing.\");\n      return;\n    }\n    const taskData = {\n      questionText,\n      userID\n    };\n    try {\n      const response = await fetch(\"/api/authh/createtask\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(taskData)\n      });\n      const result = await response.json();\n      if (response.ok) {\n        toast.success(\"Task created successfully!\");\n        setQuestionText(\"\");\n        fetchTasks(); // Fetch tasks after successful creation\n      } else {\n        console.log(result.message);\n        toast.error(result.message || \"Failed to create task\");\n      }\n    } catch (error) {\n      console.error(\"Error creating task:\", error);\n      toast.error(\"An error occurred while creating the task.\");\n    }\n  };\n  const fetchTasks = async () => {\n    if (!userID) {\n      toast.error(\"User ID is missing.\");\n      return;\n    }\n    try {\n      const response = await fetch(`/api/authh/alltaskget/${userID}`, {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        }\n      });\n      if (response.ok) {\n        const fetchedTasks = await response.json();\n        setTasks(fetchedTasks); // Update the tasks state with the fetched tasks\n      } else {\n        const result = await response.json();\n        console.log(result.message);\n        toast.error(result.message || \"Failed to fetch tasks\");\n      }\n    } catch (error) {\n      console.error(\"Error fetching tasks:\", error);\n      toast.error(\"An error occurred while fetching the tasks.\");\n    }\n  };\n  useEffect(() => {\n    fetchTasks(); // Fetch tasks on component mount\n  }, [userID]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Create a New Task\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Question Text:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            value: questionText,\n            onChange: e => setQuestionText(e.target.value),\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          children: \"Create Task\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Your Tasks\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 9\n      }, this), tasks.length > 0 ? /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: tasks.map(task => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleTaskClick(task),\n            style: {\n              background: \"#f0f0f0\",\n              border: \"none\",\n              padding: \"10px\",\n              textAlign: \"left\",\n              width: \"100%\",\n              cursor: \"pointer\",\n              marginBottom: \"5px\",\n              fontSize: \"16px\",\n              borderRadius: \"5px\"\n            },\n            onMouseOver: e => {\n              e.currentTarget.style.backgroundColor = \"#e0e0e0\";\n            },\n            onMouseOut: e => {\n              e.currentTarget.style.backgroundColor = \"#f0f0f0\";\n            },\n            children: task.questionText\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 17\n          }, this)\n        }, task._id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"No tasks found.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n_s(CreateTask, \"qcf6fQYTqE44t+1l9drZjObHOF0=\", false, function () {\n  return [useAuth];\n});\n_c = CreateTask;\nexport default CreateTask;\nvar _c;\n$RefreshReg$(_c, \"CreateTask\");","map":{"version":3,"names":["React","useState","useEffect","toast","useAuth","jsxDEV","_jsxDEV","Fragment","_Fragment","CreateTask","_s","questionText","setQuestionText","userID","setUserID","tasks","setTasks","UserIDFROMLSGet","storedUserID","console","error","handleSubmit","e","preventDefault","taskData","response","fetch","method","headers","body","JSON","stringify","result","json","ok","success","fetchTasks","log","message","fetchedTasks","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","value","onChange","target","required","type","length","map","task","onClick","handleTaskClick","style","background","border","padding","textAlign","width","cursor","marginBottom","fontSize","borderRadius","onMouseOver","currentTarget","backgroundColor","onMouseOut","_id","_c","$RefreshReg$"],"sources":["C:/Users/POOJA/newtask/client/src/Components/Addtask/Addtask.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport { useAuth } from \"../Store/authh\";\r\n\r\nconst CreateTask = () => {\r\n  const [questionText, setQuestionText] = useState(\"\");\r\n  const [userID, setUserID] = useState(\"\");\r\n  const [tasks, setTasks] = useState([]);\r\n\r\n  const { UserIDFROMLSGet } = useAuth();\r\n\r\n  useEffect(() => {\r\n    // Fetch userID from local storage when the component mounts\r\n    const storedUserID = UserIDFROMLSGet();\r\n    if (storedUserID) {\r\n      setUserID(storedUserID);\r\n    } else {\r\n      console.error(\"No userID found in local storage.\");\r\n      toast.error(\"Failed to retrieve user ID. Please log in again.\");\r\n    }\r\n  }, [UserIDFROMLSGet]);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    if (!userID) {\r\n      toast.error(\"User ID is missing.\");\r\n      return;\r\n    }\r\n\r\n    const taskData = {\r\n      questionText,\r\n      userID,\r\n    };\r\n\r\n    try {\r\n      const response = await fetch(\"/api/authh/createtask\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify(taskData),\r\n      });\r\n      const result = await response.json();\r\n\r\n      if (response.ok) {\r\n        toast.success(\"Task created successfully!\");\r\n        setQuestionText(\"\");\r\n        fetchTasks(); // Fetch tasks after successful creation\r\n      } else {\r\n        console.log(result.message);\r\n        toast.error(result.message || \"Failed to create task\");\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error creating task:\", error);\r\n      toast.error(\"An error occurred while creating the task.\");\r\n    }\r\n  };\r\n\r\n  const fetchTasks = async () => {\r\n    if (!userID) {\r\n      toast.error(\"User ID is missing.\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const response = await fetch(`/api/authh/alltaskget/${userID}`, {\r\n        method: \"GET\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n      });\r\n\r\n      if (response.ok) {\r\n        const fetchedTasks = await response.json();\r\n        setTasks(fetchedTasks); // Update the tasks state with the fetched tasks\r\n      } else {\r\n        const result = await response.json();\r\n        console.log(result.message);\r\n        toast.error(result.message || \"Failed to fetch tasks\");\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error fetching tasks:\", error);\r\n      toast.error(\"An error occurred while fetching the tasks.\");\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchTasks(); // Fetch tasks on component mount\r\n  }, [userID]);\r\n\r\n  return (\r\n    <>\r\n      <div>\r\n        <h2>Create a New Task</h2>\r\n        <form onSubmit={handleSubmit}>\r\n          <div>\r\n            <label>Question Text:</label>\r\n            <textarea\r\n              value={questionText}\r\n              onChange={(e) => setQuestionText(e.target.value)}\r\n              required\r\n            />\r\n          </div>\r\n          <button type=\"submit\">Create Task</button>\r\n        </form>\r\n      </div>\r\n\r\n      <div>\r\n        <h1>Your Tasks</h1>\r\n        {tasks.length > 0 ? (\r\n          <ul>\r\n            {tasks.map((task) => (\r\n              <li key={task._id}>\r\n                <button\r\n                  onClick={() => handleTaskClick(task)}\r\n                  style={{\r\n                    background: \"#f0f0f0\",\r\n                    border: \"none\",\r\n                    padding: \"10px\",\r\n                    textAlign: \"left\",\r\n                    width: \"100%\",\r\n                    cursor: \"pointer\",\r\n                    marginBottom: \"5px\",\r\n                    fontSize: \"16px\",\r\n                    borderRadius: \"5px\",\r\n                  }}\r\n                  onMouseOver={(e) => {\r\n                    e.currentTarget.style.backgroundColor = \"#e0e0e0\";\r\n                  }}\r\n                  onMouseOut={(e) => {\r\n                    e.currentTarget.style.backgroundColor = \"#f0f0f0\";\r\n                  }}\r\n                >\r\n                  {task.questionText}\r\n                </button>\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        ) : (\r\n          <p>No tasks found.</p>\r\n        )}\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default CreateTask;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}